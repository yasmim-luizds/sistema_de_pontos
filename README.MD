# Sistema de Controle de Ponto â€“ Python + Oracle

**Disciplina:** Banco de Dados  
**Professor:** Howard Roatti  
**InstituiÃ§Ã£o:** FAESA  
**Ãšltima atualizaÃ§Ã£o:** Outubro/2025  
**VÃ­deo de ApresentaÃ§Ã£o: https://youtu.be/FCXpp0ONjVg**
Integrantes: Hellen Karla Costa, JÃºlia Ogassavara e Yasmim Luiz
Turma: 4SC1
---

## DescriÃ§Ã£o do Projeto

O **Sistema de Controle de Ponto** tem como objetivo registrar as marcaÃ§Ãµes de entrada e saÃ­da dos funcionÃ¡rios, calcular jornadas de trabalho, controlar faltas e gerar relatÃ³rios de presenÃ§a e horas trabalhadas.

Este projeto foi desenvolvido em **Python**, com integraÃ§Ã£o direta ao **banco de dados Oracle**, simulando um sistema real de interface entre uma linguagem de programaÃ§Ã£o e um banco relacional.

O sistema implementa operaÃ§Ãµes **CRUD completas (Create, Read, Update, Delete)** sobre as entidades **FuncionÃ¡rio** e **MarcaÃ§Ã£o**, alÃ©m de dois relatÃ³rios obrigatÃ³rios:
1. **RelatÃ³rio com funÃ§Ãµes agregadas (GROUP BY);**  
2. **RelatÃ³rio com junÃ§Ã£o de tabelas (JOIN).**

---

## Requisitos do Ambiente

### Software NecessÃ¡rio
- **Python 3.10+** instalado no sistema;
- **Banco de Dados Oracle** acessÃ­vel e configurado;
- **Oracle Instant Client** instalado (instruÃ§Ãµes abaixo);
- DependÃªncias listadas no arquivo:
  ```
  src/requirements.txt
  ```

Instale as dependÃªncias com:
```bash
pip install -r src/requirements.txt
```

---

## Estrutura do Projeto

```
.
â”œâ”€â”€ diagrams/                      # Diagramas ER e de sequÃªncia
â”œâ”€â”€ sql/                           # Scripts SQL de criaÃ§Ã£o e consultas
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ conexion/
â”‚   â”‚   â””â”€â”€ oracle_queries.py      # ConexÃ£o e execuÃ§Ã£o de comandos SQL
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ controller_funcionario.py
â”‚   â”‚   â””â”€â”€ controller_marcacao.py # Controladores CRUD
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ funcionario.py
â”‚   â”‚   â””â”€â”€ marcacao.py            # Classes de domÃ­nio
â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â””â”€â”€ relatorios.py          # RelatÃ³rios de frequÃªncia e horas
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ config.py              # Menus e configuraÃ§Ãµes
â”‚   â”‚   â””â”€â”€ splash_screen.py       # Tela inicial com contagem de registros
â”‚   â”œâ”€â”€ create_tables_and_records.py
â”‚   â”œâ”€â”€ principal.py               # Ponto de entrada da aplicaÃ§Ã£o (CLI)
â”‚   â”œâ”€â”€ test.py                    # Testes e exemplos de uso
â”‚   â””â”€â”€ requirements.txt           # DependÃªncias Python
â””â”€â”€ README.md
```

---

## ExecuÃ§Ã£o do Projeto no Linux

1. **Clonar o repositÃ³rio do GitHub:**
   ```bash
   git clone https://github.com/<seu_usuario>/<nome_do_repositorio>.git
   cd <nome_do_repositorio>
   ```

2. **Criar e ativar ambiente virtual (recomendado):**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```

3. **Instalar as dependÃªncias:**
   ```bash
   pip install -r src/requirements.txt
   ```

4. **Criar tabelas e inserir registros de exemplo:**
   ```bash
   python src/create_tables_and_records.py
   ```

5. **Executar o sistema principal (menu interativo):**
   ```bash
   python src/principal.py
   ```

6. **Encerrar o ambiente virtual:**
   ```bash
   deactivate
   ```

---

## Exemplos de Uso (MÃ³dulo `OracleQueries`)

### Consulta:
```python
from conexion.oracle_queries import OracleQueries

query = "SELECT cpf, nome FROM funcionarios ORDER BY nome"
oracle = OracleQueries()
oracle.connect()
df = oracle.sqlToDataFrame(query)
print(df)
```

### InserÃ§Ã£o:
```python
oracle = OracleQueries(can_write=True)
oracle.connect()
oracle.write("INSERT INTO funcionarios (cpf, nome) VALUES ('00000000000', 'Fulano')")
```

---

## RelatÃ³rios Implementados

1. **RelatÃ³rio de Horas Trabalhadas (Agrupamento / GROUP BY):**
   - Soma de horas trabalhadas por funcionÃ¡rio em determinado perÃ­odo.

2. **RelatÃ³rio de MarcaÃ§Ãµes (JunÃ§Ã£o / JOIN):**
   - Exibe nome do funcionÃ¡rio, data e horÃ¡rios de entrada e saÃ­da.

---

## InstalaÃ§Ã£o do Oracle Instant Client (Linux)

1. Baixe a versÃ£o compatÃ­vel em:  
   ðŸ”— [https://www.oracle.com/database/technologies/instant-client.html](https://www.oracle.com/database/technologies/instant-client.html)

2. Se o arquivo for `.rpm`, converta e instale:
   ```bash
   sudo apt install alien
   sudo alien --scripts oracle-instantclient18.5-basic-18.5.0.0.0-3.x86_64.rpm
   ```

3. Configure as variÃ¡veis de ambiente:
   ```bash
   sudo mkdir -p /usr/local/oracle/instantclient_18_5/
   sudo mv lib /usr/local/oracle/instantclient_18_5/
   echo 'export ORACLE_HOME=/usr/local/oracle/instantclient_18_5' >> ~/.bash_profile
   echo 'export LD_LIBRARY_PATH=$ORACLE_HOME/lib' >> ~/.bash_profile
   echo 'export PATH=$PATH:$ORACLE_HOME/bin' >> ~/.bash_profile
   source ~/.bash_profile
   ```

---

## SoluÃ§Ã£o de Problemas Comuns

**Erro:** `ORA-28001: the password has expired`  
> Execute os comandos abaixo no Oracle (como DBA):
```sql
ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;
ALTER USER labdatabase IDENTIFIED BY "labDatabase2022";
```
---




